import{l as L,m as f,T as U,j as H,r as a,c as S,w as d,o as p,b as s,e as x,a as r,u as o,n as I,g as h,h as B,F as E,O as F}from"./app-2a75dbdf.js";import{_ as w}from"./App-1d6c1f16.js";import"./Admin-ac7cbed2.js";const j={class:"grid"},D={class:"col-12"},O={ref:"card",class:"card"},P=s("h4",null,"Edit Post",-1),$=["onSubmit"],N={class:"field p-fluid"},R=s("label",null,"Title",-1),q=["innerHTML"],z={class:"field"},A=s("label",null,"Short Description",-1),G=["innerHTML"],J={class:"field"},K=s("label",null,"Description",-1),Q=["innerHTML"],W={class:"field p-fluid"},X=s("label",null,"Images",-1),Y={class:"flex gap-3"},Z=["onClick"],ee=s("i",{class:"pi pi-trash"},null,-1),se=["src"],oe=["innerHTML"],re={__name:"Edit",props:{post:{type:Object}},setup(g){const t=g,v=L(),c=f(null),m=f(null),e=U({title:t.post.title,short_description:t.post.short_description,description:t.post.description,old_images:t.post.images,images:[],_method:"PUT"}),b=i=>{e.images=i.files},T=i=>{e.old_images.splice(i,1)},_=()=>{e.post(route("posts.update",t.post.id),{headers:{"Content-Type":"multipart/form-data"},preserveScroll:!0,onSuccess:()=>{v.add({severity:"success",summary:"Post updated successfully",detail:"",life:5e3}),F.reload({forceFormData:!0,onSuccess:()=>{m.value.files=[],e.title=t.post.title,e.short_description=t.post.short_description,e.description=t.post.description,e.old_images=t.post.images,e.images=[]}})}})};return H(()=>{c.value&&c.value.forEach(i=>{i.onImageClick=()=>!1})}),(i,n)=>{const k=a("InputText"),u=a("CommonEditor"),V=a("Image"),C=a("FileUpload"),M=a("Button");return p(),S(w,null,{default:d(()=>[s("div",j,[s("div",D,[s("div",O,[P,s("form",{onSubmit:x(_,["prevent"])},[s("div",N,[R,r(k,{type:"text",placeholder:"Title",modelValue:o(e).title,"onUpdate:modelValue":n[0]||(n[0]=l=>o(e).title=l),class:I({"p-invalid":o(e).errors.title}),required:!0},null,8,["modelValue","class"]),s("small",{class:"block p-error",innerHTML:o(e).errors.title},null,8,q)]),s("div",z,[A,r(u,{modelValue:o(e).short_description,"onUpdate:modelValue":n[1]||(n[1]=l=>o(e).short_description=l)},null,8,["modelValue"]),s("small",{class:"block p-error",innerHTML:o(e).errors.short_description},null,8,G)]),s("div",J,[K,r(u,{modelValue:o(e).description,"onUpdate:modelValue":n[2]||(n[2]=l=>o(e).description=l)},null,8,["modelValue"]),s("small",{class:"block p-error",innerHTML:o(e).errors.description},null,8,Q)]),s("div",W,[X,s("div",Y,[(p(!0),h(E,null,B(o(e).old_images,(l,y)=>(p(),h("div",{onClick:te=>T(y)},[r(V,{ref_for:!0,ref_key:"imageRef",ref:c,preview:""},{indicatoricon:d(()=>[ee]),image:d(()=>[s("img",{height:"150",width:"150",style:{"object-fit":"contain"},src:`/storage/${l}`,alt:"image"},null,8,se)]),_:2},1536)],8,Z))),256))]),r(C,{class:"mt-3",ref_key:"fileUpload",ref:m,mode:"basic",name:"files[]",accept:"image/*",multiple:"",customUpload:"",onSelect:b},null,512),s("small",{class:"block p-error",innerHTML:o(e).errors["images.0"]},null,8,oe)]),r(M,{class:"mt-4",label:"Save",loading:o(e).processing,onClick:_},null,8,["loading"])],40,$)],512)])])]),_:1})}}};export{re as default};
